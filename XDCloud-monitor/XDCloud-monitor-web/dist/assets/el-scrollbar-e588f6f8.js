import{b9 as _e,K as W,at as G,L as V,$ as he,g as te,q as j,h as K,J as Fe,u as Ee,t as p,j as O,a2 as J,a1 as ne,o as B,d as Z,w as be,ay as Pe,a as Q,n as I,k as y,M as ee,az as ke,T as Ce,c as ye,b as ae,ad as Le,Z as Re,F as A,a8 as re,G as x,aA as ze,a5 as $,H as ge,v as Ne,c0 as Oe,m as we,e as He,l as Ae,aE as Be,s as Ie,af as xe}from"./index-b0e8aca7.js";import{t as Ke,i as Ue}from"./el-button-a220bfc2.js";const ht=e=>["",..._e].includes(e);let z=[];const le=e=>{const o=e;o.key===he.esc&&z.forEach(a=>a(o))},De=e=>{W(()=>{z.length===0&&document.addEventListener("keydown",le),G&&z.push(e)}),V(()=>{z=z.filter(o=>o!==e),z.length===0&&G&&document.removeEventListener("keydown",le)})},N=4,Me={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},$e=({move:e,size:o,bar:a})=>({[a.size]:o,transform:`translate${a.axis}(${e}%)`}),Se=Symbol("scrollbarContextKey"),We=te({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),Ve="Thumb",je=K({__name:"thumb",props:We,setup(e){const o=e,a=Fe(Se),t=Ee("scrollbar");a||Ke(Ve,"can not inject scrollbar context");const r=p(),d=p(),c=p({}),b=p(!1);let i=!1,S=!1,T=G?document.onselectstart:null;const l=O(()=>Me[o.vertical?"vertical":"horizontal"]),F=O(()=>$e({size:o.size,move:o.move,bar:l.value})),P=O(()=>r.value[l.value.offset]**2/a.wrapElement[l.value.scrollSize]/o.ratio/d.value[l.value.offset]),s=f=>{var n;if(f.stopPropagation(),f.ctrlKey||[1,2].includes(f.button))return;(n=window.getSelection())==null||n.removeAllRanges(),E(f);const v=f.currentTarget;v&&(c.value[l.value.axis]=v[l.value.offset]-(f[l.value.client]-v.getBoundingClientRect()[l.value.direction]))},u=f=>{if(!d.value||!r.value||!a.wrapElement)return;const n=Math.abs(f.target.getBoundingClientRect()[l.value.direction]-f[l.value.client]),v=d.value[l.value.offset]/2,w=(n-v)*100*P.value/r.value[l.value.offset];a.wrapElement[l.value.scroll]=w*a.wrapElement[l.value.scrollSize]/100},E=f=>{f.stopImmediatePropagation(),i=!0,document.addEventListener("mousemove",h),document.addEventListener("mouseup",m),T=document.onselectstart,document.onselectstart=()=>!1},h=f=>{if(!r.value||!d.value||i===!1)return;const n=c.value[l.value.axis];if(!n)return;const v=(r.value.getBoundingClientRect()[l.value.direction]-f[l.value.client])*-1,w=d.value[l.value.offset]-n,_=(v-w)*100*P.value/r.value[l.value.offset];a.wrapElement[l.value.scroll]=_*a.wrapElement[l.value.scrollSize]/100},m=()=>{i=!1,c.value[l.value.axis]=0,document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",m),C(),S&&(b.value=!1)},L=()=>{S=!1,b.value=!!o.size},R=()=>{S=!0,b.value=i};V(()=>{C(),document.removeEventListener("mouseup",m)});const C=()=>{document.onselectstart!==T&&(document.onselectstart=T)};return J(ne(a,"scrollbarElement"),"mousemove",L),J(ne(a,"scrollbarElement"),"mouseleave",R),(f,n)=>(B(),Z(Ce,{name:y(t).b("fade"),persisted:""},{default:be(()=>[Pe(Q("div",{ref_key:"instance",ref:r,class:I([y(t).e("bar"),y(t).is(y(l).key)]),onMousedown:u},[Q("div",{ref_key:"thumb",ref:d,class:I(y(t).e("thumb")),style:ee(y(F)),onMousedown:s},null,38)],34),[[ke,f.always||b.value]])]),_:1},8,["name"]))}});var ce=j(je,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/thumb.vue"]]);const Ye=te({always:{type:Boolean,default:!0},width:String,height:String,ratioX:{type:Number,default:1},ratioY:{type:Number,default:1}}),Xe=K({__name:"bar",props:Ye,setup(e,{expose:o}){const a=e,t=p(0),r=p(0);return o({handleScroll:c=>{if(c){const b=c.offsetHeight-N,i=c.offsetWidth-N;r.value=c.scrollTop*100/b*a.ratioY,t.value=c.scrollLeft*100/i*a.ratioX}}}),(c,b)=>(B(),ye(Le,null,[ae(ce,{move:t.value,ratio:c.ratioX,size:c.width,always:c.always},null,8,["move","ratio","size","always"]),ae(ce,{move:r.value,ratio:c.ratioY,size:c.height,vertical:"",always:c.always},null,8,["move","ratio","size","always"])],64))}});var qe=j(Xe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/bar.vue"]]);const Ge=te({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:Re([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20}}),Je={scroll:({scrollTop:e,scrollLeft:o})=>[e,o].every(A)},Ze="ElScrollbar",Qe=K({name:Ze}),et=K({...Qe,props:Ge,emits:Je,setup(e,{expose:o,emit:a}){const t=e,r=Ee("scrollbar");let d,c;const b=p(),i=p(),S=p(),T=p("0"),l=p("0"),F=p(),P=p(1),s=p(1),u=O(()=>{const n={};return t.height&&(n.height=re(t.height)),t.maxHeight&&(n.maxHeight=re(t.maxHeight)),[t.wrapStyle,n]}),E=O(()=>[t.wrapClass,r.e("wrap"),{[r.em("wrap","hidden-default")]:!t.native}]),h=O(()=>[r.e("view"),t.viewClass]),m=()=>{var n;i.value&&((n=F.value)==null||n.handleScroll(i.value),a("scroll",{scrollTop:i.value.scrollTop,scrollLeft:i.value.scrollLeft}))};function L(n,v){Be(n)?i.value.scrollTo(n):A(n)&&A(v)&&i.value.scrollTo(n,v)}const R=n=>{A(n)&&(i.value.scrollTop=n)},C=n=>{A(n)&&(i.value.scrollLeft=n)},f=()=>{if(!i.value)return;const n=i.value.offsetHeight-N,v=i.value.offsetWidth-N,w=n**2/i.value.scrollHeight,_=v**2/i.value.scrollWidth,H=Math.max(w,t.minSize),g=Math.max(_,t.minSize);P.value=w/(n-w)/(H/(n-H)),s.value=_/(v-_)/(g/(v-g)),l.value=H+N<n?`${H}px`:"",T.value=g+N<v?`${g}px`:""};return x(()=>t.noresize,n=>{n?(d==null||d(),c==null||c()):({stop:d}=ze(S,f),c=J("resize",f))},{immediate:!0}),x(()=>[t.maxHeight,t.height],()=>{t.native||$(()=>{var n;f(),i.value&&((n=F.value)==null||n.handleScroll(i.value))})}),ge(Se,Ne({scrollbarElement:b,wrapElement:i})),W(()=>{t.native||$(()=>{f()})}),Oe(()=>f()),o({wrapRef:i,update:f,scrollTo:L,setScrollTop:R,setScrollLeft:C,handleScroll:m}),(n,v)=>(B(),ye("div",{ref_key:"scrollbarRef",ref:b,class:I(y(r).b())},[Q("div",{ref_key:"wrapRef",ref:i,class:I(y(E)),style:ee(y(u)),onScroll:m},[(B(),Z(He(n.tag),{ref_key:"resizeRef",ref:S,class:I(y(h)),style:ee(n.viewStyle)},{default:be(()=>[we(n.$slots,"default")]),_:3},8,["class","style"]))],38),n.native?Ae("v-if",!0):(B(),Z(qe,{key:0,ref_key:"barRef",ref:F,height:l.value,width:T.value,always:n.always,"ratio-x":s.value,"ratio-y":P.value},null,8,["height","width","always","ratio-x","ratio-y"]))],2))}});var tt=j(et,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/scrollbar.vue"]]);const Et=Ie(tt),X="focus-trap.focus-after-trapped",q="focus-trap.focus-after-released",st="focus-trap.focusout-prevented",ie={cancelable:!0,bubbles:!1},ot={cancelable:!0,bubbles:!1},ue="focusAfterTrapped",fe="focusAfterReleased",nt=Symbol("elFocusTrap"),se=p(),Y=p(0),oe=p(0);let U=0;const Te=e=>{const o=[],a=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:t=>{const r=t.tagName==="INPUT"&&t.type==="hidden";return t.disabled||t.hidden||r?NodeFilter.FILTER_SKIP:t.tabIndex>=0||t===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;a.nextNode();)o.push(a.currentNode);return o},de=(e,o)=>{for(const a of e)if(!at(a,o))return a},at=(e,o)=>{if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(o&&e===o)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1},rt=e=>{const o=Te(e),a=de(o,e),t=de(o.reverse(),e);return[a,t]},lt=e=>e instanceof HTMLInputElement&&"select"in e,k=(e,o)=>{if(e&&e.focus){const a=document.activeElement;e.focus({preventScroll:!0}),oe.value=window.performance.now(),e!==a&&lt(e)&&o&&e.select()}};function ve(e,o){const a=[...e],t=e.indexOf(o);return t!==-1&&a.splice(t,1),a}const ct=()=>{let e=[];return{push:t=>{const r=e[0];r&&t!==r&&r.pause(),e=ve(e,t),e.unshift(t)},remove:t=>{var r,d;e=ve(e,t),(d=(r=e[0])==null?void 0:r.resume)==null||d.call(r)}}},it=(e,o=!1)=>{const a=document.activeElement;for(const t of e)if(k(t,o),document.activeElement!==a)return},me=ct(),ut=()=>Y.value>oe.value,D=()=>{se.value="pointer",Y.value=window.performance.now()},pe=()=>{se.value="keyboard",Y.value=window.performance.now()},ft=()=>(W(()=>{U===0&&(document.addEventListener("mousedown",D),document.addEventListener("touchstart",D),document.addEventListener("keydown",pe)),U++}),V(()=>{U--,U<=0&&(document.removeEventListener("mousedown",D),document.removeEventListener("touchstart",D),document.removeEventListener("keydown",pe))}),{focusReason:se,lastUserFocusTimestamp:Y,lastAutomatedFocusTimestamp:oe}),M=e=>new CustomEvent(st,{...ot,detail:e}),dt=K({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[ue,fe,"focusin","focusout","focusout-prevented","release-requested"],setup(e,{emit:o}){const a=p();let t,r;const{focusReason:d}=ft();De(s=>{e.trapped&&!c.paused&&o("release-requested",s)});const c={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},b=s=>{if(!e.loop&&!e.trapped||c.paused)return;const{key:u,altKey:E,ctrlKey:h,metaKey:m,currentTarget:L,shiftKey:R}=s,{loop:C}=e,f=u===he.tab&&!E&&!h&&!m,n=document.activeElement;if(f&&n){const v=L,[w,_]=rt(v);if(w&&_){if(!R&&n===_){const g=M({focusReason:d.value});o("focusout-prevented",g),g.defaultPrevented||(s.preventDefault(),C&&k(w,!0))}else if(R&&[w,v].includes(n)){const g=M({focusReason:d.value});o("focusout-prevented",g),g.defaultPrevented||(s.preventDefault(),C&&k(_,!0))}}else if(n===v){const g=M({focusReason:d.value});o("focusout-prevented",g),g.defaultPrevented||s.preventDefault()}}};ge(nt,{focusTrapRef:a,onKeydown:b}),x(()=>e.focusTrapEl,s=>{s&&(a.value=s)},{immediate:!0}),x([a],([s],[u])=>{s&&(s.addEventListener("keydown",b),s.addEventListener("focusin",T),s.addEventListener("focusout",l)),u&&(u.removeEventListener("keydown",b),u.removeEventListener("focusin",T),u.removeEventListener("focusout",l))});const i=s=>{o(ue,s)},S=s=>o(fe,s),T=s=>{const u=y(a);if(!u)return;const E=s.target,h=s.relatedTarget,m=E&&u.contains(E);e.trapped||h&&u.contains(h)||(t=h),m&&o("focusin",s),!c.paused&&e.trapped&&(m?r=E:k(r,!0))},l=s=>{const u=y(a);if(!(c.paused||!u))if(e.trapped){const E=s.relatedTarget;!Ue(E)&&!u.contains(E)&&setTimeout(()=>{if(!c.paused&&e.trapped){const h=M({focusReason:d.value});o("focusout-prevented",h),h.defaultPrevented||k(r,!0)}},0)}else{const E=s.target;E&&u.contains(E)||o("focusout",s)}};async function F(){await $();const s=y(a);if(s){me.push(c);const u=s.contains(document.activeElement)?t:document.activeElement;if(t=u,!s.contains(u)){const h=new Event(X,ie);s.addEventListener(X,i),s.dispatchEvent(h),h.defaultPrevented||$(()=>{let m=e.focusStartEl;xe(m)||(k(m),document.activeElement!==m&&(m="first")),m==="first"&&it(Te(s),!0),(document.activeElement===u||m==="container")&&k(s)})}}}function P(){const s=y(a);if(s){s.removeEventListener(X,i);const u=new CustomEvent(q,{...ie,detail:{focusReason:d.value}});s.addEventListener(q,S),s.dispatchEvent(u),!u.defaultPrevented&&(d.value=="keyboard"||!ut()||s.contains(document.activeElement))&&k(t??document.body),s.removeEventListener(q,S),me.remove(c)}}return W(()=>{e.trapped&&F(),x(()=>e.trapped,s=>{s?F():P()})}),V(()=>{e.trapped&&P()}),{onKeydown:b}}});function vt(e,o,a,t,r,d){return we(e.$slots,"default",{handleKeydown:e.onKeydown})}var bt=j(dt,[["render",vt],["__file","/home/runner/work/element-plus/element-plus/packages/components/focus-trap/src/focus-trap.vue"]]);export{Et as E,nt as F,bt as a,ht as i};
